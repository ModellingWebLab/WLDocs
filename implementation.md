# Cardiac Electrophysiology Web Lab implementation

This document deals with the _implementation_ of the cardiac electrophysiology (CE) parts of the Web Lab (WL).
For a description of the generic Web Lab implementation, see [here](infrastructure.md).
For information on using the Cardiac Electrophysiology Web Lab (CEWL), see [here](README.md).


## Components

The CEWL is implemented using a number of re-usable Python modules.
While some of these modules depend on each other, they are written to be relatively independent of the Web Lab front-end.

* **`cellmlmanip`**: Reads a CellML model and generates a directed acyclical graph of its equations, which users can query via its API.
* **`fccodegen`**: Uses `cellmlmanip` to read CellML files and then generate CEWL model code. Code generation is based on templating, so it should be possible to adapt this into a general purpose CellML-to-code converter.
* **`fc`**: Functional curation library. Reads FC protocols and runs simulations with models (generated by `fccodegen`) to generate results.


### CellMLManip

See: https://github.com/ModellingWebLab/cellmlmanip


### fccodegen

See: https://github.com/ModellingWebLab/fccodegen


## fc

See: https://github.com/ModellingWebLab/weblab-fc

Uses Cython a lot: http://docs.cython.org/en/latest/src/userguide/language_basics.html#language-basics

Rough outline (**not finished**):

 - `Model` objects own a `Solver` that can be used to run simulations. They maintain a state, list of outputs, a list of parameters and a free variable that are publically accessible.
 - `Environment` objects map oxmeta variables to model variables, allow changes to models to be made
 - `Protocol` objects own `Models` and `Environments` and can manipulate models (through their environment) and solve model.
 - `Simulation` runs a protocol?


